# 🛡️ セキュリティポリシー

## 📋 セキュリティ報告

### 脆弱性の報告方法
タップカルテプロジェクトのセキュリティを重要視しています。セキュリティの脆弱性を発見した場合は、以下の手順で報告してください。

**⚠️ 公開のIssueトラッカーではセキュリティ脆弱性を報告しないでください。**

#### 📧 セキュア報告手順
1. **プライベート連絡**: kushiro.ai.lab@gmail.com までご連絡ください
2. **件名**: "[SECURITY] タップカルテ脆弱性報告"
3. **必須情報**:
   - 脆弱性の詳細説明
   - 再現手順（可能な場合）
   - 影響範囲の評価
   - 発見者の連絡先情報

#### 📅 対応タイムライン
- **24時間以内**: 初回確認・受領通知
- **72時間以内**: 脆弱性の検証・影響評価
- **7日以内**: 修正パッチの開発・テスト
- **14日以内**: 修正版のリリース

## 🔒 セキュリティ基準

### サポート対象バージョン
| バージョン | セキュリティサポート |
| --- | --- |
| 最新版 | ✅ 完全サポート |
| 1つ前のメジャーバージョン | ⚠️ 重大な脆弱性のみ |
| それ以前 | ❌ サポート終了 |

### 実装済みセキュリティ機能

#### 🛡️ アプリケーションレベル
- **入力検証**: 全ユーザー入力の厳密検証
- **個人情報検出**: リアルタイム個人情報パターンマッチング
- **XSS防御**: Content Security Policy + 入力サニタイゼーション
- **SQLインジェクション対策**: パラメータ化クエリ
- **CSRF保護**: トークンベース検証
- **レート制限**: API濫用防止システム

#### 🔐 認証・認可
- **JWT認証**: セキュアなトークンベース認証
- **セッション管理**: 安全なセッション制御
- **最小権限原則**: 必要最小限のアクセス権限

#### 🌐 ネットワークセキュリティ
- **HTTPS強制**: 全通信の暗号化
- **セキュリティヘッダー**: HSTS, CSP, X-Frame-Options等
- **Cloudflare WAF**: OWASP Top10対策
- **DDoS防御**: Cloudflareレイヤーでの攻撃遮断

#### 📊 監視・ログ
- **構造化ログ**: セキュリティイベントの詳細記録
- **異常検知**: 不審なアクセスパターンの自動検出
- **監査ログ**: 全管理者操作の記録

## 🏥 医療業界特化セキュリティ

### 個人情報保護
- **ゼロデータ保存**: 入力内容の完全非保存
- **個人情報検出**: 医療関連個人情報の自動検出・ブロック
- **データ暗号化**: 処理中データの暗号化
- **匿名化統計**: 個人特定不可能な統計情報のみ収集

### 医療データ特有の対策
- **病名検出**: 珍しい病名・診断の入力警告
- **診療情報保護**: カルテ・診断書関連情報の検出
- **患者プライバシー**: 氏名・住所・生年月日等の厳格ブロック

## 🔧 開発者向けセキュリティガイドライン

### コーディング規約
```typescript
// ❌ 悪い例：生のユーザー入力を直接使用
const query = `SELECT * FROM users WHERE name = '${userInput}'`

// ✅ 良い例：パラメータ化クエリを使用
const query = db.prepare('SELECT * FROM users WHERE name = ?').bind(sanitizedInput)
```

### 必須チェック項目
- [ ] 全ユーザー入力の検証・サニタイゼーション
- [ ] SQLインジェクション対策の実装
- [ ] XSS防御の確認
- [ ] 認証・認可の適切な実装
- [ ] ログ出力時の個人情報除外
- [ ] エラーメッセージでの情報漏洩防止

### 禁止事項
- 🚫 APIキー・シークレットのハードコーディング
- 🚫 個人情報のログ出力
- 🚫 SQL文への直接的なユーザー入力結合
- 🚫 プレーンテキストでの認証情報保存
- 🚫 詳細なエラー情報の本番環境出力

## 🚨 インシデント対応

### 緊急度分類
| レベル | 説明 | 対応時間 |
|--------|------|----------|
| 🔴 Critical | データ漏洩・システム侵害 | 1時間以内 |
| 🟡 High | 脆弱性悪用・サービス停止 | 4時間以内 |
| 🟠 Medium | セキュリティ機能不備 | 24時間以内 |
| 🔵 Low | 軽微な脆弱性 | 1週間以内 |

### 対応手順
1. **検知・報告** → 即座にセキュリティチームに通知
2. **初動対応** → 被害拡大の防止・証跡保全
3. **影響調査** → 被害範囲・原因の特定
4. **復旧作業** → システム修復・セキュリティ強化
5. **事後対応** → 報告書作成・再発防止策実装

## 📚 参考リソース

### セキュリティ標準
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [NIST Cybersecurity Framework](https://www.nist.gov/cyberframework)
- [CIS Controls](https://www.cisecurity.org/controls/)

### 医療セキュリティ
- [厚生労働省 医療情報システムの安全管理に関するガイドライン](https://www.mhlw.go.jp/)
- [医療情報システム開発センター（MEDIS-DC）](https://www.medis.or.jp/)

## 📞 連絡先

**セキュリティ担当**: タップカルテ セキュリティチーム  
**Email**: kushiro.ai.lab@gmail.com  
**件名**: "[SECURITY] タップカルテセキュリティ関連"

---

**最終更新**: 2025年10月8日  
**バージョン**: 1.0  
**分類**: 🏥 医療業界対応セキュリティポリシー